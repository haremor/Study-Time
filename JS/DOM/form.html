<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../func.js"></script>
    <title>SHET</title>
    <style>
        input,
        select {
            margin-bottom: 10px;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <form action="" id="shit">
        <input type="text" name="form" placeholder="Enter shit">
        <br>
        <label for="fav">SHITTY SELECTION</label>
        <select id="fav" name="sel">
            <option value="shit">SHIT</option>
            <option value="cum">CUM</option>
            <option value="piss">PISS</option>
        </select>
        <br>
        <input type="submit" value="LOG MI">
        <input type="button" value="ADD MI" onclick="inputNew(this)">
    </form>
    <a href="">CHANGE MI</a>
    <script>
        let form = document.forms.shit;
        log(form.elements) // Только для форм. Массив всех элементов формы

        // function getInfo() {
        //     for (let i = 0; i < form.elements.length; i++) {
        //         if (i !== form.elements.length - 1) {
        //             log(form.elements[i].value)
        //         }
        //         if (form.elements[i].type){
        //             console.log(form.elements[i].type);
        //         } else {
        //             console.log(form.elements[i].value)
        //         }
        //     }
        // }

        // const getFormBody = function (el) {
        //     log(el);
        //     let formBody = {};
        //     for (let i = 0; i < form.elements.length; i++) {
        //         let el = form.elements[i];
        //         if (el.name) {
        //             formBody[el.name] = el.value;
        //         }
        //     }
        //     log(formBody);
        // }

        let link = form.nextElementSibling;
        link.onclick = function (event) {
            event.preventDefault(); // отменить действие по умолчанию
            this.style.color = getRGB();
        }


        form.onsubmit = function (event) {
            event.preventDefault();
            let formBody = {};
            for (let i = 0; i < form.elements.length; i++) {
                let el = form.elements[i];
                if (el.name) {
                    formBody[el.name] = el.value || "VOID";
                }
            }
            log(formBody);

            if (!document.getElementById("info-space")) {
                let info = document.createElement("div");
                info.innerText = `${formBody.form} : ${formBody.sel}`;
                info.className = "line";
                info.id = "info-space";
                document.body.insertBefore(info, form);
            } else {
                document.getElementById("info-space").innerText = `${formBody.form} : ${formBody.sel}`;
            }
        }

        const inputNew = function (el) {
            el.onclick = "";
            let add = document.createElement("input");
            add = form.appendChild(add);
            add.type = "text";
            add.placeholder = "Enter shit to add";
            add.onchange = function () {
                let s = document.getElementById("fav");
                s[s.options.length] = new Option(add.value, add.value);
            }
        }
    </script>
</body>
</html>